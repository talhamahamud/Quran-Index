{% extends 'base.html' %}

{% block title %}Create New Post{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>

<section class="main-section">
    <header>Create New Post (Subject)</header>
    <article>
        <div class="form-card">
            <form method="POST" action="">
                <div style="margin-bottom: 15px;">
                    <label for="title">Title (Subject Name):</label><br>
                    <input type="text" name="title" id="title" style="width: 100%; padding: 8px; margin-top: 5px;" required>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label for="slug">Slug (URL friendly name, optional):</label><br>
                    <input type="text" name="slug" id="slug" style="width: 100%; padding: 8px; margin-top: 5px;" placeholder="Leave empty to auto-generate from title">
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="content">Content:</label><br>
                    <!-- SimpleMDE will attach to this textarea -->
                    <textarea name="content" id="content" rows="8" style="width: 100%; padding: 8px; margin-top: 5px;"></textarea>
                </div>
                
                <button type="submit" style="padding: 10px 20px; background-color: #4d4e53; color: white; border: none; cursor: pointer;">Create Post</button>
            </form>
        </div>
    </article>
</section>

<script>
    var simplemde = new SimpleMDE({ 
        element: document.getElementById("content"),
        spellChecker: false,
        status: false,
        placeholder: "Write your content here... You can use standard Markdown.",
        toolbar: [
            "bold", "italic", "heading", "|", "quote", "unordered-list", "ordered-list", "|", "link", "image", "|", "preview", "side-by-side", "fullscreen", "|",
            {
                name: "ayat",
                action: function customFunction(editor){
                    var cm = editor.codemirror;
                    var selection = cm.getSelection();
                    cm.replaceSelection('<div class="ayat">\n' + selection + '\n</div>');
                },
                className: "fa fa-star",
                title: "Ayat Style",
            },
            "guide"
        ]
    });
</script>
{% endblock %}
